.<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vocabulario Griego</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 0;
      padding: 0;
      background: #f4f4f4;
    }
    nav {
      background: #333;
      color: white;
      padding: 10px;
      display: flex;
      justify-content: space-around;
    }
    nav a {
      color: white;
      text-decoration: none;
      padding: 8px 12px;
    }
    nav a.active {
      background: #555;
      border-radius: 4px;
    }
    main {
      max-width: 800px;
      margin: 20px auto;
      padding: 0 20px;
    }
    .filtro {
      margin-bottom: 20px;
    }
    .palabra {
      background: white;
      padding: 15px;
      margin-bottom: 10px;
      border-radius: 5px;
      box-shadow: 0 1px 3px rgba(0,0,0,0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .texto-griego {
      font-weight: bold;
      font-size: 1.2em;
    }
    .traduccion {
      display: none;
      margin-top: 5px;
      color: #444;
    }
    .icono-ojo {
      cursor: pointer;
      font-size: 1.2em;
    }
      /* Estilos del buscador y teclado */
    .buscador {
      display: flex;
      align-items: center;
      margin-bottom: 20px;
      gap: 10px;
    }
    #inputBusqueda {
      flex: 1;
      padding: 8px;
      font-size: 1em;
    }
    #btnTeclado {
      cursor: pointer;
      font-size: 1.5em;
    }
    .teclado-virtual {
      display: none;
      flex-wrap: wrap;
      gap: 4px;
      margin-bottom: 20px;
    }
    .tecla {
      padding: 6px 10px;
      background: #eee;
      border: 1px solid #ccc;
      border-radius: 4px;
      cursor: pointer;
      user-select: none;
    }
  </style>
</head>
<body>

  <nav>
    <a href="#">Gram√°tica</a>
    <a href="juego1.html">Repasar</a>
    <a href="index.html" class="active">Vocabulario</a>
  </nav>

  <main>
    <h1>Vocabulario Griego</h1>
    
 <!-- Buscador + teclado virtual -->
    <div class="buscador">
      <input id="inputBusqueda" placeholder="Buscar en espa√±ol o griego‚Ä¶" />
      <span id="btnTeclado" title="Teclado griego">‚å®Ô∏è</span>
    </div>
    <div id="tecladoVirtual" class="teclado-virtual"></div>
    <div class="filtro">
      <label for="filtroCategoria">Filtrar por categor√≠a:</label>
      <select id="filtroCategoria">
        <option value="">-- Todas --</option>
      </select>
    </div>

    <div class="filtro">
      <label for="filtroTipo">Filtrar por tipo:</label>
      <select id="filtroTipo">
        <option value="">-- Todos --</option>
      </select>
    </div>
<h2 id="tituloFiltro"></h2>
    <div id="listaPalabras"></div>
  </main>

  <script>
    const listaPalabras = document.getElementById("listaPalabras");
    const filtroCategoria = document.getElementById("filtroCategoria");
    const filtroTipo = document.getElementById("filtroTipo");
     const inputBusqueda = document.getElementById("inputBusqueda");
    const btnTeclado = document.getElementById("btnTeclado");
    const tecladoVirtual = document.getElementById("tecladoVirtual");
    let palabras = [];

     // Construye el teclado virtual
    const griego = ['Œ±','Œ≤','Œ≥','Œ¥','Œµ','Œ∂','Œ∑','Œ∏','Œπ','Œ∫','Œª','Œº','ŒΩ','Œæ','Œø','œÄ','œÅ','œÉ','œÑ','œÖ','œÜ','œá','œà','œâ','Œ¨','Œ≠','ŒÆ','ŒØ','œå','œç','œé'];
    griego.forEach(letra => {
      const btn = document.createElement('span');
      btn.textContent = letra;
      btn.className = 'tecla';
      btn.addEventListener('click', () => {
        inputBusqueda.value += letra;
        filtrarYMostrar();
      });
      tecladoVirtual.appendChild(btn);
    });

    btnTeclado.addEventListener('click', () => {
      tecladoVirtual.style.display =
        tecladoVirtual.style.display === 'flex' ? 'none' : 'flex';
    });

    inputBusqueda.addEventListener('input', filtrarYMostrar);

    function obtenerCategorias(palabras) {
      return [...new Set(palabras.flatMap(p => p.etiquetas))];
    }
    function obtenerTipos(palabras) {
      return [...new Set(palabras.map(p => p.tipo))];
    }

    function cargarFiltros() {
      obtenerCategorias(palabras).forEach(cat => {
        filtroCategoria
          .appendChild(new Option(cat, cat));
      });
      obtenerTipos(palabras).forEach(tipo => {
        filtroTipo
          .appendChild(new Option(tipo, tipo));
      });
    }

    filtroCategoria.addEventListener("change", mostrarPalabras);
    filtroTipo.addEventListener("change", mostrarPalabras);

    function filtrarYMostrar() {
      const termino = inputBusqueda.value.trim().toLowerCase();
      let filtradas = palabras;

      // aplica filtros de categor√≠a y tipo
      const cat = filtroCategoria.value,
            tip = filtroTipo.value;
      filtradas = filtradas.filter(p =>
        (!cat || p.etiquetas.includes(cat)) &&
        (!tip || p.tipo === tip)
      );

      // aplica filtro de b√∫squeda
      if (termino) {
        filtradas = filtradas.filter(p => {
          // concatena todos los posibles t√©rminos
          const esp = Array.isArray(p.espa√±ol) ? p.espa√±ol.join(' ') : p.espa√±ol;
          const gr = Array.isArray(p.griego) ? p.griego.join(' ') : p.griego;
          return esp.toLowerCase().startsWith(termino)
              || gr.toLowerCase().startsWith(termino);
        });
      }

      mostrarPalabras(filtradas);
    }

    function mostrarPalabras(lista = null) {
      const listaM = lista || palabras.slice();

      // orden alfab√©tico griego
      listaM.sort((a,b) => {
        const ag = Array.isArray(a.griego)?a.griego[0]:a.griego;
        const bg = Array.isArray(b.griego)?b.griego[0]:b.griego;
        return ag.localeCompare(bg,'el');
      });

      listaPalabras.innerHTML = '';
      listaM.forEach(p => {
        const div = document.createElement("div");
        div.className = "palabra";
        const contenido = document.createElement("div");

        const tg = document.createElement("div");
        tg.className = "texto-griego";
        tg.textContent = Array.isArray(p.griego) ? p.griego.join(" / ") : p.griego;

        const tr = document.createElement("div");
        tr.className = "traduccion";
        tr.style.display = "none";
        tr.textContent = Array.isArray(p.espa√±ol) ? p.espa√±ol.join(" / ") : p.espa√±ol;

        const ojo = document.createElement("span");
        ojo.className = "icono-ojo"; ojo.innerHTML = "üëÅÔ∏è";
        ojo.onclick = () => tr.style.display = tr.style.display==='block'?'none':'block';

        const audio = document.createElement("span");
        audio.className = "icono-ojo"; audio.innerHTML = "üîä";
        audio.onclick = ()=> {
          const frases = Array.isArray(p.griego)?p.griego:[p.griego];
          frases.forEach(f=>{let u=new SpeechSynthesisUtterance(f);u.lang='el-GR';speechSynthesis.speak(u);});
        };

        contenido.append(tg, tr);
        div.append(contenido, ojo, audio);
        listaPalabras.appendChild(div);
      });
    }

    // carga inicial
    fetch('vocab.json')
      .then(r=>r.json())
      .then(data=>{
        palabras = data;
        // orden inicial griego
        palabras.sort((a,b)=> {
          const ag=Array.isArray(a.griego)?a.griego[0]:a.griego;
          const bg=Array.isArray(b.griego)?b.griego[0]:b.griego;
          return ag.localeCompare(bg,'el');
        });
        cargarFiltros();
        mostrarPalabras();
      });
  </script>
</body>
</html>
